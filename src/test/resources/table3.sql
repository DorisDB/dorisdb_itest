use db0;
CREATE TABLE if not exists table3
(
  event_day DATE,
  siteid INT DEFAULT '10',
  citycode SMALLINT,
  username VARCHAR(32) DEFAULT '',
  pv BIGINT SUM DEFAULT '0'
)
AGGREGATE KEY(event_day, siteid, citycode, username)
PARTITION BY RANGE(event_day)
(
  PARTITION p20170701 VALUES LESS THAN ('2017-07-02'),
  PARTITION p20170702 VALUES LESS THAN ('2017-07-03'),
  PARTITION p20170703 VALUES LESS THAN ('2017-07-04'),
  PARTITION p20170704 VALUES LESS THAN ('2017-07-05'),
  PARTITION p20170705 VALUES LESS THAN ('2017-07-06'),
  PARTITION p20170706 VALUES LESS THAN ('2017-07-07'),
  PARTITION p20170707 VALUES LESS THAN ('2017-07-08'),
  PARTITION p20170708 VALUES LESS THAN ('2017-07-09'),
  PARTITION p20170709 VALUES LESS THAN ('2017-07-10'),
  PARTITION p20170710 VALUES LESS THAN ('2017-07-11')
)
DISTRIBUTED BY HASH(siteid) BUCKETS 64
PROPERTIES("replication_num" = "3");
