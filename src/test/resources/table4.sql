use db0;
CREATE TABLE if not exists table4
(
  event_day DATE,
  f0 LARGEINT DEFAULT '10',
  f1 LARGEINT DEFAULT '10',
  f2 LARGEINT DEFAULT '10',
  f3 LARGEINT DEFAULT '10',
  f4 LARGEINT DEFAULT '10',
  siteid INT DEFAULT '10',
  citycode SMALLINT,
  username VARCHAR(32) DEFAULT '',
  pv BIGINT DEFAULT '0'
)
DUPLICATE KEY(event_day, f0, f1, f2, f3, f4, siteid, citycode, username)
PARTITION BY RANGE(event_day)
(
  PARTITION p20170701 VALUES LESS THAN ('2017-07-02'),
  PARTITION p20170702 VALUES LESS THAN ('2017-07-03'),
  PARTITION p20170703 VALUES LESS THAN ('2017-07-04'),
  PARTITION p20170704 VALUES LESS THAN ('2017-07-05'),
  PARTITION p20170705 VALUES LESS THAN ('2017-07-06'),
  PARTITION p20170706 VALUES LESS THAN ('2017-07-07'),
  PARTITION p20170707 VALUES LESS THAN ('2017-07-08'),
  PARTITION p20170708 VALUES LESS THAN ('2017-07-09'),
  PARTITION p20170709 VALUES LESS THAN ('2017-07-10'),
  PARTITION p20170710 VALUES LESS THAN ('2017-07-11')
)
DISTRIBUTED BY HASH(siteid) BUCKETS 8
PROPERTIES(
    "replication_num" = "3",
    "short_key" = "9"
);
